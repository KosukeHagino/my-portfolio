@charset "utf-8";

/**************************************************
   z-index 管理（重なりの順番）
**************************************************/
/* --- common.css で一括管理します。 --- */



/**************************************************
   Keyframes
**************************************************/
/* --- Scroll bar --- */
@keyframes scroll-bar {
    0%    { transform: scaleX(0); transform-origin: left; }     /* 左端を固定して右へ伸ばす */
    50%   { transform: scaleX(1); transform-origin: left; }
    50.1% { transform: scaleX(1); transform-origin: right; }    /* 右端を固定して左へ縮ませる */
    100%  { transform: scaleX(0); transform-origin: right; }
}


/* --- Contact text rotate --- */
@keyframes rotate-anim {
    0%   { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}



/**************************************************
   Loading
**************************************************/
.loading {
    position: fixed;
    inset: 0;
    display: flex;
    justify-content: center;
    align-items: center;
    background-color: var(--black);
    opacity: 0;             /* 2回目以降の訪問やローディング終了後：非表示 */
    visibility: hidden;
    transition:
        opacity 1.5s ease,      /* ローディング終了：1.5秒かけて透明度を徐々に変えて非表示 */
        visibility 1.5s ease;
}

.is-first-visit .loading {
    opacity: 1;             /* 初回訪問・ローディング中：表示 */
    visibility: visible;
    transition: none;       /* ローディング開始：上書きして現れる時のチラつき防止（一瞬で表示） */
}


/* --- Counter --- */
.loading-counter {
    display: flex;
    align-items: baseline;
    font-family: var(--accent-font);
    font-weight: 400;
    font-style: italic;
    font-size: 2.4rem;
    color: var(--white);
    letter-spacing: 0.15em;
    font-feature-settings: "tnum";      /* 数字の幅を等幅（固定幅）にする */
    opacity: 0;             /* カウンター表示前：非表示 */
    filter: blur(15px);     /* カウンター表示前：少しボカす */
    transform: scale(1.1);  /* カウンター表示前：少し大きくする */
    transition: 
        opacity var(--transition-base),     /* カウンター表示：0.6秒かけて徐々に透明度を変えて表示 */
        filter var(--transition-base),      /* カウンター表示：0.6秒かけて徐々にボカしをなくしクリアにする */
        transform var(--transition-base);   /* カウンター表示：0.6秒かけて徐々に元の大きさに戻す（小さくなる） */
}

.is-first-visit .loading-counter.is-active {
    opacity: 1;             /* カウンター表示後：表示 */
    filter: blur(0);        /* カウンター表示後：ボカしをなくしてクリアにする */
    transform: scale(1);    /* カウンター表示後：元の大きさに戻す（小さくなる） */
}

.loading-num {
    width: 2.5em;           /* 3桁の数字が入る幅を確保（フォントサイズに依存） */
    text-align: right;      /* 右寄せにし、%との距離を常に一定に保つ */
    margin-right: 0.04em;   /* 数字と%の間の余白 */
}



/**************************************************
   Work Text Area
**************************************************/
/* --- Layout: テキストの表示枠 --- */
.work-text-area {
    position: fixed;
    left: 25%;
    top: 30px;
    width: 50%;
    height: 30px;           /* PC用：1行の高さ */
    display: flex;
    justify-content: center;
    align-items: center;
    pointer-events: none;   /* マウス操作を無効化 */
}

.work-text-list {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    transform: translateY(calc(var(--current-index, 0) * -30px));   /* JSから受け取った制作物のindexに30px（1行の高さ）を掛けて移動距離を算出 */
    transition: transform var(--transition-slide);   /* リスト全体の移動：1.2秒かけて上下にスライド */
}

.work-text-item {
    height: 30px;           /* PC用：1行の高さ */
    width: 100%;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.work-info-upper {
    display: flex;
    align-items: center;
    gap: 20px;      /* 種類とタイトルの間隔 */
}

/* --- State: 子要素の基本状態（消えている時） --- */
.work-type-label,
.work-title,
.work-description {
    opacity: 0;                                 /* 中央に来ていない時：非表示 */
    transition:
        opacity var(--transition-base),         /* 現れる時・消える時：0.6秒かけて徐々に透明度を変えて表示・非表示 */
        transform var(--transition-base);       /* 現れる時・消える時：0.6秒かけて上下に移動 */
    transition-delay: 0s;                       /* 消える時は即座に反応 */
}

.work-title {
    padding: 0 5px;
    font-size: 1.4rem;
    color: var(--blue);
    border-bottom: 1px dotted var(--black);
}

.work-description {
    color: var(--blue);
}

/* --- State: 待機位置の制御（JS data-index-diff 連動） --- */
/* --- 下側待機（diff > 0) --- */
.work-text-item[data-index-diff^="1"] .work-type-label,
.work-text-item[data-index-diff^="1"] .work-title,
.work-text-item[data-index-diff^="1"] .work-description,
.work-text-item[data-index-diff^="2"] .work-type-label,
.work-text-item[data-index-diff^="2"] .work-title,
.work-text-item[data-index-diff^="2"] .work-description {
    transform: translateY(20px);        /* 後に控える制作物のテキストを予め20px下で待機（隠しておく） */
}

/* --- 上側待機（diff < 0) --- */
.work-text-item[data-index-diff^="-"] .work-type-label,
.work-text-item[data-index-diff^="-"] .work-title,
.work-text-item[data-index-diff^="-"] .work-description {
    transform: translateY(-20px);       /* 前に控える制作物のテキストを予め20px上で待機（隠しておく） */
}

/* --- State: アクティブ状態（中央表示） --- */
.work-text-item.is-active .work-type-label,
.work-text-item.is-active .work-title,
.work-text-item.is-active .work-description {
    opacity: 1;
    transform: translateY(0);           /* 中央にきている制作物のテキストを表示 */
}

/* --- Appearance: 現れる時の時間差演出 --- */
.work-text-item.is-active .work-type-label  { transition-delay: 0.3s; }     /* 現れる時：種類は0.3秒遅れて表示 */
.work-text-item.is-active .work-title       { transition-delay: 0.45s; }    /* 現れる時：タイトルは0.45秒遅れて表示 */
.work-text-item.is-active .work-description { transition-delay: 0.6s; }     /* 現れる時：説明は0.6秒遅れて表示 */



/**************************************************
   Work List
**************************************************/
.work-list {
    width: 100%;
    height: 100dvh;
    display: flex;
    align-items: center;
    overflow-x: auto;           /* 横スクロールを有効 */
    overflow-y: clip;           /* 縦スクロールを無効 */
    overscroll-behavior-x: contain; /* スクロールが端で止まるように */
    scroll-snap-type: x mandatory;  /* 横方向にスナップ */
    -ms-overflow-style: none;   /* スクロールバーを非表示（IE / 旧Edge用） */
    scrollbar-width: none;      /* スクロールバーを非表示（Firefox用） */
    scroll-behavior: smooth;    /* 滑らかにスクロール */
    padding: 0 25%;             /* 左右に余白を設けて、前後の画像を少し画面に入れ込む */
    gap: 10%;                   /* 前後の画像との隙間 */
}

.work-list::-webkit-scrollbar {
    display: none;              /* スクロールバーを非表示（Chrome / Safari / 新Edge用） */
}

.work-item {
    flex: 0 0 100%;             /* 画像を拡大縮小させずに常に幅100%にする */
    scroll-snap-align: center;  /* 画面中央にスナップ */
    display: flex;
    justify-content: center;
    align-items: center;
}

/* --- Catch copy（制作物スライドの先頭） --- */
.catch-copy {
    text-align: center;
    font-weight: 400;
}

.content-ready .catch-copy {
    opacity: 1;                     /* ローディング後：表示 */
    transform: translateY(0);       /* ローディング後：元の位置に戻す（少し上に移動） */
    filter: blur(0);                /* ローディング後：ボカしをなくす（クリアにする） */
}

.catch-item {
    margin-right: 50vw;         /* 右側の制作物との距離を空けてキャッチコピーの表示中は制作物を見せないようにする */
    pointer-events: none;       /* マウス操作を無効化 */
}

.copy-jp {
    display: block;
    font-size: 2.6rem;
    letter-spacing: 0.3em;
    margin-bottom: 40px;
    opacity: 0;                         /* ローディング中：非表示 */
    transform: translateY(20px);        /* ローディング中：少し下にずらす */
    filter: blur(10px);                 /* ローディング中：少しボカす */
    transition:
        opacity 1.2s ease,                      /* 和文表示：1.2秒かけて透明度を変えて徐々に表示 */
        transform var(--transition-slide),      /* 和文表示：1.2秒かけて元の位置に戻す（上にずれる） */
        filter 1.2s ease;                       /* 和文表示：1.2秒かけてボカしをなくしてクリアにする */
}

.copy-en {
    display: block;
    font-size: 1.6rem;
    letter-spacing: 0.3em;
    font-family: var(--accent-font);
    font-weight: 400;
    font-style: normal;
    color: var(--green); 
    opacity: 0;                         /* ローディング中：非表示 */
    transform: translateY(10px);        /* ローディング中：少し下にずらす */
    filter: blur(5px);                  /* ローディング中：少しボカす */
    transition:
        opacity 1.2s ease 0.6s,                     /* 英文表示：0.6秒待った後1.2秒かけて透明度を変えて徐々に表示 */
        transform var(--transition-slide) 0.6s;     /* 英文表示：0.6秒待った後1.2秒かけて元の位置に戻す（上にずれる） */
        filter: 1.2s ease 0.6s;                     /* 英文表示：0.6秒待った後1.2秒かけてボカしをなくしてクリアにする */
}

.content-ready .copy-jp,
.content-ready .copy-en {
    opacity: 1;                         /* ローディング後：表示 */
    transform: translateY(0);           /* ローディング後：元の位置に戻す（少し上に移動） */
    filter: blur(0);                    /* ローディング後：ボカしをなくしてクリアにする */
}

/* --- Work item（制作物スライド） --- */
.work-item a {
    display: block;
    width: 100%;
    overflow: hidden;
    border-radius: 10px;
    filter: drop-shadow(0 0 3px #ccc);
}

.work-item a .work-img {
    width: 100%;
    height: auto;
    transition:
        transform 0.5s ease,        /* 中央への出入り・ホバー：0.5秒かけて大きさを変える */
        opacity 0.5s ease;          /* 中央への出入り：0.5秒かけて透明度を変える */
}

.work-item.is-active a .work-img {
    transform: scale(1);            /* 中央：元の大きさに戻す（大きくなる） */
    opacity: 1;                     /* 中央：透明度を元に戻して濃くする */
}

.work-item:not(.is-active) a .work-img {
    border-radius: 8px;
    filter: drop-shadow(0 0 3px #ccc);
    transform: scale(0.8);          /* 中央以外：少し小さくする */
    opacity: 0.3;                   /* 中央以外：透明度を変えて薄くする */
}

/* Contact（制作物スライドの最後） */
.contact-item {
    flex-shrink: 0;
    width: 200px; 
    flex-basis: auto; 
    scroll-snap-align: none;    /* 中央にスナップしないようにする */
    display: flex;
    justify-content: center;
    align-items: center;
    margin-left: 4vw; 
}

.contact-item a {
    display: block;
    width: 150px;       /* 画像サイズ */
    height: 150px;
    position: relative;
    filter: none;       /* 上書きして影なしにする（drop-shadowをリセット） */
}

.contact-item a .rotating-text {
    display: block;
    width: 100%;
    height: 100%;
    animation: rotate-anim 10s linear infinite;     /* 通常：10秒/周で回転（ゆっくり） */
}

.arrow {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 2rem;
}



/**************************************************
   Scroll Bar
**************************************************/
.scroll {
    position: fixed;
    left: 50%;
    bottom: 30px;
    transform: translateX(-50%);
    width: 200px;
    display: flex;
    justify-content: center;
    align-items: center;
    pointer-events: none;   /* マウス操作を無効化 */
}

.scroll-txt {
    display: flex;
    justify-content: center;
    padding: 0 16px;
    font-size: 1rem;
    letter-spacing: 0.6em;
    background-color: var(--gray);
}

.scroll-txt::after {
    content: "";
    position: absolute;
    top: 50%;
    width: 100%;
    height: 0.5px;
    background-color: var(--black);
    animation: scroll-bar 1.2s infinite ease-out;   /* スクロールバー：1.2秒かけて左から右に線が通過する動きを無限に繰り返す */
}



/**************************************************
   Indicator
**************************************************/
.indicator {
    display: none;      /* PC：非表示 */
}



/**************************************************
   Media Queries
**************************************************/
/* --- 画面サイズで判定（～768pxのスマホ・タブレットを想定） --- */
@media screen and (max-width:768px) {
    html, body {
        overflow-y: clip;           /* 縦スクロールを無効 */
    }

    .work-text-area {
        left: 10%;
        top: 12.5vh;
        width: 80%;
        height: auto;
        align-items: flex-start;
    }

    .work-text-list {
        position: relative;
    }

    .work-text-item {
        display: block;
    }

    .work-info-upper {
        justify-content: flex-start;
        gap: 15px;                  /* 種類とタイトルの間隔 */
    }

    .work-text-item.is-active .work-title {
        transition-delay: 0.45s;    /* 現れる時：タイトルは0.45秒遅れて表示 */
    }

    .work-description {
        display: none;
    }

    .contact-description {
        display: block;
        padding-top: 5vh;
        width: 80%;
        margin: 0 auto;
        transition-delay: 0.3s;     /* 現れる時：タイトルは0.3秒遅れて表示 */
    }

    .work-list {
        padding-top: 10vh;
        -webkit-overflow-scrolling: touch;      /* 指での操作を滑らかにする */
    }

    .catch-copy {
        line-height: 1.8;
        padding-bottom: 10vh;
    }

    .copy-jp {
        font-size: 2.4rem;
        word-break: keep-all;       /* <wbr>のある場所で改行 */
        overflow-wrap: break-word;  /* 入り切らない時は強制改行 */
        text-align: justify;        /* 両端揃え */
        margin-bottom: 15px;
    }

    .copy-en {
        font-size: 1.3rem;
        letter-spacing: 0.2em;
    }

    .contact-item {
        width: 100%;
        padding-bottom: 10vh;
        margin-left: 50vw;          /* 余白をリセット */
        scroll-snap-align: center;  /* スマホでは中央にスナップさせる */
        flex: 0 0 100%;             /* 他の作品と同じ幅にする */
    }
    
    .contact-item a {
        width: 120px;
        height: 120px;
    }

    .scroll {
        display: none;
    }

    .indicator {
        display: flex;
        position: fixed;
        left: 50%;
        bottom: 7.5vh;
        transform: translateX(-50%);
        gap: 15px;          /* ドット同士の間隔 */
    }

    .indicator-dot {
        position: relative;
        width: 8px;
        height: 8px;
        border-radius: 50%;
        background-color: var(--green);
        transition:
            background-color 0.3s ease,     /* インジケーターの切替：0.3秒かけて徐々に色が変化 */
            transform 0.3s ease;            /* インジケーターの切替：0.3秒かけて徐々に大きさが変化 */
    }

    .indicator-dot.is-active {
        background-color: var(--blue);
        transform: scale(1.5);
    }
}


/* --- 操作方法で判定（PCなどのホバー可能な端末） --- */
@media (hover:hover) {
    .work-item.is-active a:hover .work-img {
        transform: scale(1.1);          /* 中央ホバー：少し大きくする */
    }

    .work-item:not(.is-active) a:hover .work-img {
        transform: scale(0.85);         /* 中央以外ホバー：少し大きくする */
    }

    .contact-item a:hover .rotating-text {
        animation-duration: 3s;                         /* ホバー：3秒/周で回転（速くする） */
    }
}


/* --- 操作方法で判定（iPad + マウスなどの特殊ケースをカバー） --- */
@media (hover: none), (pointer: coarse) {
    .work-item {
        user-select: none;              /* スライド操作中に誤って文字が選択されるのを防ぎます */
        -webkit-user-select: none;
    }
}
