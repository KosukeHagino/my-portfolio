@charset "utf-8";

/* --- 変数はcommon.cssで一括管理 --- */



/**************************************************
   Keyframes
**************************************************/
/* --- Scroll bar --- */
@keyframes scroll-bar {
    0%    { transform: scaleX(0); transform-origin: left; }     /* 左端を固定して右へ伸ばす */
    50%   { transform: scaleX(1); transform-origin: left; }
    50.1% { transform: scaleX(1); transform-origin: right; }    /* 右端を固定して左へ縮ませる */
    100%  { transform: scaleX(0); transform-origin: right; }
}



/**************************************************
   Loading
**************************************************/
.loading {
    position: fixed;
    inset: 0;
    display: flex;
    justify-content: center;
    align-items: center;
    background-color: var(--black);
    z-index: var(--z-loading);
    opacity: 0;                 /* 2回目以降の訪問やローディング終了後：非表示 */
    visibility: hidden;
    transition:
        opacity 1.5s ease,      /* ローディング終了：1.5秒かけて透明度を徐々に変えて非表示 */
        visibility 1.5s ease;
}

.is-first-visit .loading {
    opacity: 1;                 /* 初回訪問・ローディング中：表示 */
    visibility: visible;
    transition: none;           /* ローディング開始：上書きして現れる時のチラつき防止（一瞬で表示） */
}


/* --- Counter --- */
.loading-counter {
    display: flex;
    align-items: baseline;
    font-family: var(--countup-font);
    font-variation-settings: 'wght' 400, 'slnt' -10;
    font-size: var(--font-size-l);
    color: var(--white);
    letter-spacing: 0.12em;
    font-variant-numeric: tabular-nums;     /* 数字の幅を等幅（固定幅）にする */
    opacity: 0;                             /* カウンター表示前：非表示 */
    filter: blur(15px);                     /* カウンター表示前：少しボカす */
    transform: scale(1.1);                  /* カウンター表示前：少し大きくする */
    transition: 
        opacity var(--transition-base),     /* カウンター表示：0.6秒かけて徐々に透明度を変えて表示 */
        filter var(--transition-base),      /* カウンター表示：0.6秒かけて徐々にボカしをなくしクリアにする */
        transform var(--transition-base);   /* カウンター表示：0.6秒かけて徐々に元の大きさに戻す（小さくなる） */
}

.is-first-visit .loading-counter.is-active {
    opacity: 1;             /* カウンター表示後：表示 */
    filter: blur(0);        /* カウンター表示後：ボカしをなくしてクリアにする */
    transform: scale(1);    /* カウンター表示後：元の大きさに戻す（小さくなる） */
}

.loading-num {
    width: 2.5em;           /* 3桁の数字が入る幅を確保（フォントサイズに依存） */
    text-align: right;      /* 右寄せにし、%との距離を常に一定に保つ */
}



/**************************************************
   Work Text Area
**************************************************/
/* --- Layout: テキストの表示枠 --- */
.work-text-area {
    position: fixed;
    left: calc((100% - var(--work-text-pc-x)) / 2);    /* (100%-幅)/2で左右中央に配置 */
    top: var(--space-m);
    width: var(--work-text-pc-x);
    height: var(--work-text-item-y);    /* PC用：1行の高さ */
    display: flex;
    justify-content: center;
    align-items: center;
    pointer-events: none;               /* マウス操作を無効化 */
    font-size: var(--font-size-m);
}

.work-text-list {
    position: absolute;
    top: 0;
    left: 0;
    transform: translateY(calc(var(--current-index, 0) * var(--work-text-item-y) * -1));   /* JSから受け取った制作物のindexに1行の高さ(可変)を掛けて移動距離を算出 */
    transition: transform var(--transition-slide);   /* リスト全体の移動：1.2秒かけて上下にスライド */
}

.work-text-item {
    height: var(--work-text-item-y);    /* PC用：1行の高さ */
    display: flex;
    align-items: center;
    gap: var(--space-m);
}

/* --- State: 子要素の基本状態（消えている時） --- */
.work-type-label,
.work-title {
    opacity: 0;                                 /* 中央に来ていない時：非表示 */
    transition:
        opacity var(--transition-base),         /* 現れる時・消える時：0.6秒かけて徐々に透明度を変えて表示・非表示 */
        transform var(--transition-base);       /* 現れる時・消える時：0.6秒かけて上下に移動 */
    transition-delay: 0s;                       /* 消える時は即座に反応 */
}

.work-title {
    font-weight: 400;
}

/* --- State: 待機位置の制御（JS data-index-diff 連動） --- */
/* --- 下側待機（diff > 0) --- */
.work-text-item[data-index-diff^="1"] .work-type-label,
.work-text-item[data-index-diff^="1"] .work-title,
.work-text-item[data-index-diff^="2"] .work-type-label,
.work-text-item[data-index-diff^="2"] .work-title {
    transform: translateY(20px);        /* 後に控える制作物のテキスト：予め20px下で待機（非表示） */
}

/* --- 上側待機（diff < 0) --- */
.work-text-item[data-index-diff^="-"] .work-type-label,
.work-text-item[data-index-diff^="-"] .work-title {
    transform: translateY(-20px);       /* 前に控える制作物のテキスト：予め20px上で待機（非表示） */
}

/* --- State: アクティブ状態（中央表示） --- */
.work-text-item.is-active .work-type-label,
.work-text-item.is-active .work-title {
    opacity: 1;
    transform: translateY(0);           /* 中央にきている制作物のテキスト：表示 */
}

/* --- Appearance: 現れる時の時間差演出 --- */
.work-text-item.is-active .work-type-label  { transition-delay: 0.3s; }     /* 現れる時：0.3秒遅れて表示 */
.work-text-item.is-active .work-title       { transition-delay: 0.45s; }    /* 現れる時：0.45秒遅れて表示 */



/**************************************************
   Work List
**************************************************/
.work-list {
    width: 100%;
    height: 100dvh;
    display: flex;
    align-items: center;
    overflow-x: auto;                   /* 横スクロールを有効 */
    overflow-y: clip;                   /* 縦スクロールを無効 */
    overscroll-behavior-x: contain;     /* スクロールが端で止まるように */
    scroll-snap-type: x mandatory;      /* 横方向にスナップ */
    -ms-overflow-style: none;           /* スクロールバーを非表示（IE / 旧Edge用） */
    scrollbar-width: none;              /* スクロールバーを非表示（Firefox用） */
    scroll-behavior: smooth;            /* 滑らかにスクロール */
    padding-inline: var(--work-slide-space-x);      /* 左右に余白を設けて、前後の画像を少し画面に入れ込む */
    gap: var(--work-slide-gap);         /* 前後の画像との隙間 */
}

.work-list::-webkit-scrollbar {
    display: none;                      /* スクロールバーを非表示（Chrome / Safari / 新Edge用） */
}


/* --- Work item（制作物スライド） --- */
.work-item {
    flex: 0 0 100%;                     /* 画像を拡大縮小させずに常に幅100%にする */
    scroll-snap-align: center;          /* 画面中央にスナップ */
    display: flex;
    justify-content: center;
    align-items: center;
}

.work-item-link,
.js-modal-trigger-button {
    position: relative;                 /* 子要素にabsoluteを指定するため */
    display: block;
    padding: 0;                         /* ボタンの標準パディングを消す */
    line-height: 1;                     /* 行の高さを最小限にして、中身のpaddingで制御しやすくする */
    font-family: inherit;               /* ボタンだけフォントがズレるのを防ぐ */
}

.work-img-container {
    overflow: hidden;
    border-radius: var(--radius-s);
    filter: drop-shadow(0 0 4px #ccc);
    transition:
        transform 0.6s ease,        /* 中央への出入り：0.6秒かけて徐々に大きさを変える */
        opacity 0.6s ease;          /* 中央への出入り：0.6秒かけて徐々に透明度を変える */
}

.work-item.is-active .work-img-container {
    transform: scale(1);            /* 中央：元の大きさ */
    opacity: 1;                     /* 中央：表示 */
}

.work-item:not(.is-active) .work-img-container {
    transform: scale(0.8);          /* 中央以外：小さくする */
    opacity: 0.4;                   /* 中央以外：少し透明にする */
}

.work-hover-overlay {
    position: absolute;
    inset: 0;
    display: flex;
    justify-content: center;
    align-items: center;
    background-color: rgba(0, 0, 0, 0.7);
    opacity: 0;                         /* 通常：非表示 */
    transition: opacity 0.6s ease;      /* ホバー：0.6秒かけて徐々に表示 */
}

.work-hover-text {
    display: inline-block;
    font-family: var(--accent-font);
    font-size: var(--font-size-m);
    letter-spacing: 0.2em;
    color: var(--white);
    border: var(--border-base) solid var(--white);
    padding-block: 1em;
    padding-inline: 1.5em;
    transform: scale(1.3);              /* 初期：少し大きくする */
    transition: transform 0.6s ease;    /* ホバー：0.6秒かけて徐々に元の大きさに戻す（小さくなる） */
}

.work-img {
    width: 100%;
    display: block;
    transition:
        transform 0.6s ease,        /* 中央への出入り・ホバー：0.5秒かけて大きさを変える */
        opacity 0.6s ease;          /* 中央への出入り：0.5秒かけて透明度を変える */
}

.work-item.is-active .work-img {
    transform: scale(1);            /* 中央：元の大きさに戻す（大きくなる） */
    opacity: 1;                     /* 中央：透明度を元に戻して濃くする */
}


/* --- Catch copy（制作物スライドの先頭） --- */
.catch-item {
    margin-right: var(--work-space-x);      /* 右側の制作物との距離を空けて制作物を見せないようにする */
    pointer-events: none;                   /* マウス操作を無効化 */
}

.copy-jp {
    display: block;
    margin-bottom: var(--space-s);
    font-family: var(--accent-font);
    font-size: var(--font-size-xl);
    font-weight: 700;
    letter-spacing: 0.5em;
    opacity: 0;                         /* ローディング中：非表示 */
    transform: translateY(20px);        /* ローディング中：少し下にずらす */
    filter: blur(10px);                 /* ローディング中：少しボカす */
    transition:
        opacity 1.2s ease,                      /* 和文表示：1.2秒かけて透明度を変えて徐々に表示 */
        transform var(--transition-slide),      /* 和文表示：1.2秒かけて元の位置に戻す（上にずれる） */
        filter 1.2s ease;                       /* 和文表示：1.2秒かけてボカしをなくしてクリアにする */
}

.copy-en {
    display: block;
    font-family: var(--accent-font);
    font-size: var(--font-size-l);
    font-weight: 400;
    letter-spacing: 0.2em;    
    color: var(--green);
    text-align: center;
    opacity: 0;                         /* ローディング中：非表示 */
    transform: translateY(10px);        /* ローディング中：少し下にずらす */
    filter: blur(5px);                  /* ローディング中：少しボカす */
    transition:
        opacity 1.2s ease 0.6s,                     /* 英文表示：0.6秒待った後1.2秒かけて透明度を変えて徐々に表示 */
        transform var(--transition-slide) 0.6s;     /* 英文表示：0.6秒待った後1.2秒かけて元の位置に戻す（上にずれる） */
        filter: 1.2s ease 0.6s;                     /* 英文表示：0.6秒待った後1.2秒かけてボカしをなくしてクリアにする */
}

.content-ready .copy-jp,
.content-ready .copy-en {
    opacity: 1;                         /* ローディング後：表示 */
    transform: translateY(0);           /* ローディング後：元の位置に戻す（少し上に移動） */
    filter: blur(0);                    /* ローディング後：ボカしをなくしてクリアにする */
}


/* Contact（制作物スライドの最後） */
.contact-item {
    display: block;
    margin-left: var(--work-space-x);       /* 左側の制作物との距離を空けて制作物を見せないようにする */
    padding: var(--space-l);
    background-color: var(--white);
    text-align: center;
    border-radius: var(--radius-s);
    filter: drop-shadow(0 0 4px #ccc);
    pointer-events: none;                   /* マウス操作を無効化 */
}

.contact-item .section-title,
.contact-item .contact-msg,
.contact-item .mail-btn {
    opacity: 0;                         /* 初期：非表示 */
    transform: translateY(20px);        /* 初期：少し下にずらす */
    transition:
        opacity var(--transition-base),     /* 表示：0.6秒かけて徐々に表示 */
        transform var(--transition-base);   /* 表示：0.6秒かけて徐々に元の位置に戻す（少し上にずれる） */
}

.contact-item .section-title {
    margin-bottom: var(--space-l);
}

.contact-item .section-title::after {
    width: 0;                           /* 初期：0 */
    transition: width 0.8s ease;        /* 表示：0.8秒かけて徐々に横に広がる */
}

.contact-item .mail-btn {
    width: var(--contact-item-pc-x);
    border-radius: 100px;
    pointer-events: auto;                   /* マウス操作を有効化 */
}

/* --- Active状態（順番に表示） --- */
.contact-item.is-active .section-title {
    opacity: 1;                         /* 現れる時：表示 */
    transform: translateY(0);           /* 現れる時：元の位置に戻す */
    transition-delay: 0.2s;             /* 現れる時：タイトルは0.2秒遅れて表示し始める */
}

.contact-item.is-active .section-title::after {
    width: 100%;                        /* 現れる時：100% */
    transition-delay: 0.2s;             /* 現れる時：タイトルの下線は0.2秒遅れて表示し始める */
}

.contact-item.is-active .contact-msg {
    opacity: 1;                         /* 現れる時：表示 */
    transform: translateY(0);           /* 現れる時：元の位置に戻す */
    transition-delay: 0.5s;             /* 現れる時：メッセージは0.5秒遅れて表示し始める */
}

.contact-item.is-active .mail-btn {
    opacity: 1;                         /* 現れる時：表示 */
    transform: translateY(0);           /* 現れる時：元の位置に戻す */
    transition-delay: 0.8s;             /* 現れる時：メールアドレスは0.8秒遅れて表示し始める */
}



/**************************************************
   Scroll Bar
**************************************************/
.scroll {
    position: fixed;
    left: 50%;
    bottom: var(--space-m);
    transform: translateX(-50%);
    width: var(--scroll-x);
    display: flex;
    justify-content: center;
    align-items: center;
    pointer-events: none;   /* マウス操作を無効化 */
}

.scroll-txt {
    display: flex;
    justify-content: center;
    padding-inline: var(--space-s);
    font-size: var(--font-size-s);
    letter-spacing: 0.4em;
    background-color: var(--gray);
}

.scroll-txt::after {
    content: "";
    position: absolute;
    bottom: 50%;
    width: 100%;
    height: var(--border-thin);
    background-color: var(--black);
    z-index: var(--z-back-content);
    animation: scroll-bar 1.2s infinite ease-out;   /* スクロールバー：1.2秒かけて左から右に線が通過する動きを無限に繰り返す */
}



/**************************************************
   Indicator
**************************************************/
.indicator {
    display: none;      /* PC：非表示 */
}



/**************************************************
   Common / Media Queries
**************************************************/
/*-------------------------------------------------
   Mobile & Tablet (Layout Switch) 
   画面サイズに応じたレイアウトの切り替え（ブレイクポイント: 768px）
-------------------------------------------------*/
@media screen and (max-width:768px) {
    .work-text-area {
        left: calc((100% - var(--work-text-sp-x)) / 2);
        top: var(--work-text-sp-top);
        width: var(--work-text-sp-x);
        height: auto;
    }

    .work-text-list {
        position: relative;
    }

    .work-list {
        -webkit-overflow-scrolling: touch;      /* 指での操作を滑らかにする */
    }

    .work-hover-overlay {
        inset: auto;
        width: 100%;
        bottom: 20px;
        left: 50%;
        transform: translateX(-50%);
        opacity: 1;
        padding: 0;
    }

    .work-hover-text {
        font-size: var(--font-size-s);
    }

    .copy-jp {
        letter-spacing: 0.2em;
    }

    .copy-en {
        /* font-size: var(--font-size-m); */
        letter-spacing: 0.12em;
    }
    
    .contact-item .mail-btn {
        width: 100%;
        font-size: var(--font-size-m);        
    }

    .sp-br {
        display: block;
    }
}


/*-------------------------------------------------
   Desktop & Mouse (Hover Effects) 
   マウス操作が可能なデバイス（PCなど）専用の演出
-------------------------------------------------*/
@media (hover:hover) {
    .work-item.is-active .work-item-link:hover .work-img,
    .work-item.is-active .js-modal-trigger-button:hover .work-img {
        transform: scale(1.1);              /* 中央ホバー：少し大きくする */
    }

    .work-item:not(.is-active) .work-item-link:hover .work-img,
    .work-item:not(.is-active) .js-modal-trigger-button:hover .work-img {
        transform: scale(1.1);              /* 中央以外ホバー：少し大きくする */
    }

    .work-item-link:hover .work-hover-overlay,
    .js-modal-trigger-button:hover .work-hover-overlay {
        opacity: 1;                         /* ホバー：オーバーレイ表示 */
    }

    .work-item-link:hover .work-hover-text,
    .js-modal-trigger-button:hover .work-hover-text {
        transform: scale(1);                /* ホバー：オーバーレイを元の大きさに戻す（小さくなる） */
    }

    .contact-item .mail-btn:hover {
        transition: color 0.5s ease;        /* ホバー：0.5秒かけて文字色を徐々に変化 */
    }
}


/*-------------------------------------------------
   Touch Devices (Touch Optimization) --- 
   タッチ操作メインのデバイス（スマホ・タブレット）専用の最適化
-------------------------------------------------*/
@media (hover: none), (pointer: coarse) {
    .work-item {
        user-select: none;              /* スライド操作中に誤って文字が選択されるのを防止 */
        -webkit-user-select: none;
    }

    .contact-item .mail-btn {
        width: 100%;
        font-size: var(--font-size-m);        
    }
}


/*-------------------------------------------------
   Mobile Optimization (Layout & Touch UX) --- 
   スマホ・タブレット向けの表示切替と、タッチ操作の最適化
   （画面幅768px以下、またはタッチパネル端末が対象）
-------------------------------------------------*/
@media screen and (max-width: 768px), (hover: none), (pointer: coarse) {
    html, body {
        overflow-y: clip;           /* 縦スクロールを無効 */
    }

    .indicator {
        display: flex;
        position: fixed;
        left: 50%;
        bottom: var(--space-l);
        transform: translateX(-50%);
        gap: var(--space-s);        /* ドット同士の間隔 */
        padding-block: var(--space-xs);
    }

    .indicator-dot {
        width: var(--indicator-xy);
        height: var(--indicator-xy);
        border-radius: 50%;
        background-color: var(--green);     /* 通常：緑 */
        transition:
            background-color 0.3s ease,     /* インジケーターの切替：0.3秒かけて徐々に色が変化 */
            transform 0.3s ease;            /* インジケーターの切替：0.3秒かけて徐々に大きさが変化 */
    }

    .indicator-dot.is-active {
        background-color: var(--blue);      /* アクティブ：青 */
        transform: scale(1.5);              /* アクティブ：少し大きくする */
    }

    .scroll {
        display: none;
    }
}
